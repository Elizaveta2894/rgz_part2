{% extends "base.html" %}

{% block title %}{{ recipe.title }} - Кулинарные рецепты{% endblock %}

{% block content %}
<div class="recipe-header">
    <div class="recipe-header-content">
        <div>
            <img src="{{ recipe.image_url }}" alt="{{ recipe.title }}" class="recipe-main-image">
            
            <div class="recipe-stats">
                <div class="stat-item">
                    <span class="stat-value">{{ recipe.cooking_time }}</span>
                    <span class="stat-label">Минут</span>
                </div>
                <div class="stat-item">
                    <span class="stat-value">{{ recipe.ingredients|length }}</span>
                    <span class="stat-label">Ингредиентов</span>
                </div>
                <div class="stat-item">
                    <span class="stat-value">{{ recipe.difficulty }}</span>
                    <span class="stat-label">Сложность</span>
                </div>
                <div class="stat-item">
                    <span class="stat-value">{{ recipe.views if recipe.views else 0 }}</span>
                    <span class="stat-label">Просмотров</span>
                </div>
            </div>
        </div>
        
        <div>
            <h1>{{ recipe.title }}</h1>
            <p style="font-size: 1.2rem; color: #666; margin-bottom: 20px;">{{ recipe.description }}</p>
            
            <div style="background: #e8f5e9; padding: 15px; border-radius: 5px; margin-bottom: 20px;">
                <p><strong>Категория:</strong> {{ recipe.category }}</p>
                <p><strong>Автор:</strong> {{ recipe.author }}</p>
                <p><strong>Сложность:</strong> 
                    <span class="difficulty-{{ recipe.difficulty.lower() }}">
                        {{ recipe.difficulty }}
                    </span>
                </p>
            </div>
            
            <div style="margin-top: 30px;">
                <a href="{{ url_for('search_page') }}" class="btn btn-secondary">
                    <i class="fas fa-search"></i> Найти похожие
                </a>
                {% if current_user and current_user.is_admin %}
                <a href="{{ url_for('admin_panel') }}" class="btn btn-primary">
                    <i class="fas fa-edit"></i> Редактировать
                </a>
                {% endif %}
            </div>
        </div>
    </div>
</div>

<div class="ingredients-list">
    <h2><i class="fas fa-shopping-basket"></i> Ингредиенты</h2>
    <ul>
        {% for ingredient in recipe.ingredients %}
        <li>
            <i class="fas fa-check-circle" style="color: #4CAF50;"></i>
            {{ ingredient }}
        </li>
        {% endfor %}
    </ul>
</div>

<div class="steps-container">
    <h2><i class="fas fa-list-ol"></i> Шаги приготовления</h2>
    {% set steps = recipe.steps.split('\n') %}
    {% for step in steps %}
    {% if step.strip() %}
    <div class="step-item">
        <span class="step-number">{{ loop.index }}</span>
        <span style="font-size: 1.1rem;">{{ step.strip() }}</span>
    </div>
    {% endif %}
    {% endfor %}
</div>

<div style="margin-top: 40px; text-align: center;">
    <a href="{{ url_for('search_page') }}" class="btn btn-primary">
        <i class="fas fa-arrow-left"></i> Вернуться к поиску
    </a>
    <a href="{{ url_for('index') }}" class="btn btn-secondary">
        <i class="fas fa-home"></i> На главную
    </a>
</div>
{% endblock %}